```
애플리케이션과 데이터베이스는 네트워크 통신이 발생하고 시간적 비용이 크다.
따라서 잦은 조회등의 발생에서 효율적인 개선을 위해 캐시의 개념을 사용한다

1차 캐시 조회 -> miss -> 2차 캐시 조회 -> miss -> db조회
```

### 영속성 컨텍스트
```
먼저 영속성 컨텍스트에 대해 정리하고가자.
```
```
영속성 컨텍스트는 데이터베이스와 애플리케이션 중간에 위치한 메모리 저장소이다.
내부 데이터는 HashMap으로 구성되어 id : entity로 저장된다.

영속 객체라 DB 데이터에 매핑되는 메모리상의 객체로
@Entity를 활용하는 객체이자 엔티티 매니저가 관리하며 변경을 추적하는 대상이 되고
영속성 컨텍스트는 이러한 영속 객체르 관리한다


영속성 컨텍스트에 보관되는 객체는?
- 응용 프로그램의 엔티티 매니저에의해 저장한 객체
- 응용 프로그램의 엔티티 매니저에의해 디비로부터 불려온 객체
```
- EMF / entityManagerFactory
```
애플리케이션당 하나의 엔티티 매니저 팩토리 / entityManagerFactory가 생성되며
emf는 디비 커넥션풀이라던가 디비 연동에 있어서 필요한 자원을 생성하는 작업 진행
엔티티 매니저 또한 emf가 생성
⭐️불변 객체로 스레드 세이프하다.
```
- EM / EntityManager는
```
EntityManager는 실제 디비 활용 작업을 수행하는데
스레드 세이프하지않고 각자 고유한 scope를 갖기 때문에 보통 한 스레드에서 하나만 생성하며
트랜잭션위에서만 제대로 동작한다.

entityManager는 특이한 성질을 갖는데 바로 DB connection을 LAZY상태로 가져간다!!!!
즉 entityManager는 트랜잭션 커밋시점에 디비에 반영할때 그때서야 db connection을 얻어 사용한다.

⭐️그리고 영속성 컨텍스트를 관리하는 주체가 바로 엔티티 매니저
```
- 영속성 컨텍스트
```
영속성 컨텍스트는 트랜잭션에 종속적으로!!!! 
트랜잭션 실행시 생성 / 트랜잭션 종료시 소멸한다.
이를 관리하는 주체가 entityManager고 entityManager의 persist(), commit()등의 매서드가 바로
영속성 컨텍스트 관련 api
```

### 1차 캐시

